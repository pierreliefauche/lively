<html>
<head>
  <style type="text/css">
    body {
      overflow: hidden;
      width: 100%;
      height: 100%;
      padding: 0;
      margin: 0;
      background: #3796D0;
    }

    @-webkit-keyframes hop {
        0% {
          opacity: 0;
          -webkit-transform: scale(0);
        }
        20% {
          opacity: 1;
          -webkit-transform: scale(1);
        }
        70% {
          opacity: 1;
          -webkit-transform: scale(1);
          -webkit-transform-origin: 50% 50%;
        }
        85% {
          opacity: 0;
        }
        100% {
          opacity: 0;
          -webkit-transform-origin: 50% 50%;
          -webkit-transform: scale(0);
        }
    }

    article {
      width: 400px;
      position: absolute;
      top: 0;
      left: 0;
      opacity: 0;
      -webkit-transform: scale(0.1);
      -webkit-transform-origin: 0 0;
      transition: all 2s ease;
      background: lightgrey;
      border: 3px solid white;
    }
    article.go {
      -webkit-animation: hop 10s;
      -webkit-animation-fill-mode: forwards;
      -webkit-transform: scale(1);
    }
  </style>
</head>
<body>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script type="text/javascript">
    var screen = [$(document).width(), $(document).height()];
    var mins = [10, 10];

    var move = function(el){
      var $el = $(typeof el === 'object' ? el : this);
      setTimeout(function(){
        $el.addClass('go').css({
          left: String(Math.floor(Math.random()*(screen[0]-$el.outerWidth()))) + 'px',
          top : String(Math.floor(Math.random()*(screen[1]-$el.outerHeight()))) + 'px'
        });
      }, 0);
    };

    var addTweet = function(username, text) {
      var $tweet = $('<article class="no"><h2>@'+username+'</h2><p>'+text+'</p></article>');
      $('body').append($tweet);
      move($tweet);
      setTimeout(function(){
        $tweet.css({
          left: '100%',
          top : '100%'
        });
      }, 7000);
      setTimeout(function(){
        $tweet.remove();
      }, 10000);
    };





    var socket = io.connect();

    socket.on('connect', function(){
      socket.emit('start', 'sunrise');
    });

    socket.on('tweet', function(tweet){
      addTweet(tweet.screen_name, tweet.text);
    });

    socket.on('error', function(error){
      console.log('----> ERROR', error);
    });

  </script>
</body>
</html>
